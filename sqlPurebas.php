<?php


//TODO ESTA OK
$data = Array
(
    0 => Array
        (
            'NCP_ID' => '1',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '420000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '0-4'
    ),

    1 => Array
        (
            'NCP_ID' => '2',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '500000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '0-4'
    ),

    2 => Array
        (
            'NCP_ID' => '3',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '500000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '0-4'
        ),

    3 => Array
        (
            'NCP_ID' => '4',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '378000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '5-15'
        ),

    4 => Array
        (
            'NCP_ID' => '5',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '450000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '5-15
'        ),

    5 => Array
        (
            'NCP_ID' => '6',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '450000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '5-15'
        ),

    6 => Array
        (
            'NCP_ID' => '7',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '357000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '16-25'
        ),

    7 => Array
        (
            'NCP_ID' => '8',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '425000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '16-25'
        ),

    8 => Array
        (
            'NCP_ID' => '9',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '425000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '16-25'
        ),

    9 => Array
        (
            'NCP_ID' => '10',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '336000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '26-'
        ),

    10 => Array
        (
            'NCP_ID' => '11',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '400000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '26-'
        ),

    11 => Array
        (
            'NCP_ID' => '12',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '400000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '3',
            'NCP_RANGO_SERVICIOS' => '26-'
        ),

    12 => Array
        (
            'NCP_ID' => '13',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '340000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '0-4'
        ),

    13 => Array
        (
            'NCP_ID' => '14',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '370000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '0-4'
        ),

    14 => Array
        (
            'NCP_ID' => '15',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '370000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '0-4'
        ),

    15 => Array
        (
            'NCP_ID' => '16',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '306000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '5-15'
        ),

    16 => Array
        (
            'NCP_ID' => '17',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '333000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '5-15'
        ),

    17 => Array
        (
            'NCP_ID' => '18',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '333000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '5-15'
        ),

    18 => Array
        (
            'NCP_ID' => '19',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '289000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '16-25'
        ),

    19 => Array
        (
            'NCP_ID' => '20',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '314500.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '16-25'
        ),

    20 => Array
        (
            'NCP_ID' => '21',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '314500.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '16-25',
        ),

    21 => Array
        (
            'NCP_ID' => '22',
            'NCP_CIUDADES_ID' => '11001,76001,05001,08001,68001',
            'NCP_PRECIO' => '272000.000',
            'NCP_TC_ID' => '1',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '26-',
        ),

    22 => Array
        (
            'NCP_ID' => '23',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '296000.000',
            'NCP_TC_ID' => '2',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '26-'
        ),

    23 => Array
        (
            'NCP_ID' => '24',
            'NCP_CIUDADES_ID' => 'ALL',
            'NCP_PRECIO' => '296000.000',
            'NCP_TC_ID' => '3',
            'NCP_NC_ID' => '4',
            'NCP_RANGO_SERVICIOS' => '26-'
        )

);


   // $query1 = "UPDATE NIVEL_CIUDAD_PRECIO SET NCP_CIUDADES_ID = '" .$record['NCP_CIUDADES_ID'] ."', NCP_PRECIO = '" .$record['NCP_PRECIO'] ."'";
	//$query2 = "INSERT INTO NIVEL_CIUDAD_PRECIO ('" . join("';'", array_keys($record) ) ."') VALUES ('" . join("';'", array_values($record) ) ."')";
	
	foreach( $data as $record ){
		//print_r($record);
		
	if( !empty($record['NCP_ID']) ){ //Actualizacion
		$query = "UPDATE NIVEL_CIUDAD_PRECIO SET NCP_CIUDADES_ID = '" .$record['NCP_CIUDADES_ID'] ."', NCP_PRECIO = '" .$record['NCP_PRECIO'] ."'";
	}else{ //creacion
		$query = "INSERT INTO NIVEL_CIUDAD_PRECIO (" . join(",", array_keys($record) ) .") VALUES ('" . join("','", array_values($record) ) ."')";		
	}
	
	echo $query;
	echo "espacio\n";
}
    
	//echo $query;
	//echo "\n";

?>